{% extends "base.html" %}

{% block content %}
<a href="{% url 'clients:client-detail' client.client_number %}">Go back to client</a>
<h2>Contact History for {{ client.first_name }} {{ client.last_name }}</h2>

{% if contacts.exists %}
<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Reason</th>
            <th>Description</th>
            <th>Made by</th>
        </tr>
    </thead>
    <tbody>
        {% for contact in contacts %}
        <tr>
            <td>{{ contact.contact_date }}</td>
            <td>{{ contact.get_reason_display }}</td>
            <td>{{ contact.description }}</td>
            <td>{{ contact.user.user.username }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No contact history available for this client.</p>
{% endif %}

<a href="{% url 'clients:contact-create' client.client_number %}">Add New Contact</a>
{% endblock %}
